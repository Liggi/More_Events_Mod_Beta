#Central system. Watching the watchmen.

#Central system
mem_regressors_central_system = {
	class = sc_black_hole
	asteroids_distance = 60
	# name = "REG CEN"
	
	# usage = misc_system_init
	usage_odds = 1
	max_instances = 1
	
	flags = { mem_regressors_central_system }
	
	planet = {
		class = star
		orbit_distance = 0
		
		init_effect = {
			prevent_anomaly = yes
			orbital_deposit_tile = { clear_deposits = yes }
			
			create_ambient_object = {
				type = "large_debris_object"
				location = this
			}
			last_created_ambient_object = { 
				set_location = {
					target = prev
					distance = 20
					angle = 20
				}
			}
			create_ambient_object = {
				type = "large_debris_object"
				location = this
			}
			last_created_ambient_object = { 
				set_location = {
					target = prev
					distance = 20
					angle = 150
				}
			}
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = this
			}
			last_created_ambient_object = { 
				set_location = {
					target = prev
					distance = 35
					angle = 90
				}
			}
			create_ambient_object = {
				type = "medium_debris_02_object"
				location = this
			}
			last_created_ambient_object = { 
				set_location = {
					target = prev
					distance = 3
					angle = 270
				}
			}
		}
	}
	
	change_orbit = 60
	
	planet = {
		count = 1
		name = "MXX-Z89"
		orbit_distance = 0
		size = 9
		class = pc_asteroid
		
		flags = { mem_regressors_asteroid }
		
		init_effect = {
			prevent_anomaly = yes
			orbital_deposit_tile = { clear_deposits = yes }
		}
	}
	
	planet = {
		count = 7
		orbit_distance = 0
		orbit_angle = { min = 35 max = 45 }
		class = pc_asteroid
		size = { min = 4 max = 6 }
	}
	
	planet = {
		count = 1
		class = pc_barren
		orbit_distance = 30
		entity = "barren_planet_01_destroyed_entity"
		
		
	}
}

mem_regressors_guardians_system = {
	class = sc_a
	asteroids_distance = 60
	
	flags = { mem_regressors_guardians_system }
	
	planet = {
		class = star
		orbit_distance = 0
		size = 30
	}
	
	planet = {
		count = 1
		class = pc_molten
		size = 12
		orbit_distance = 20
	}
	
	planet = {
		count = 1
		class = pc_toxic
		size = 20
		orbit_distance = 20
		
		moon = {
			count = 1
			class = pc_barren
			size = 6
			orbit_distance = 6
		}
	}
	
	planet = {
		count = 1
		class = pc_gas_giant
		size = 25
		orbit_distance = 40
		
		moon = {
			count = { min = 1 max = 4 }
			class = random_non_colonizable
			orbit_distance = { min = 4 max = 7 }
			size = { min = 4 max = 8 }
		}
	}
}

#Final system with bosses and rewards. Ships are set by an event
mem_regressors_final_system = {
	class = sc_m
	asteroids_distance = 120
	
	flags = { mem_regressors_final_system }
	
	planet = {
		class = star
		orbit_distance = 0
		size = 20
	}
	
	planet = {
		class = pc_molten
		orbit_distance = 25
		size = 16
		
		moon = {
			class = pc_molten
			orbit_distance = 5
			size = 5
		}
	}
	
	planet = {
		class = pc_toxic
		orbit_distance = 25
		size = 25
	}
	
	planet = {
		class  = pc_nuked
		size = 20
		orbit_distance = 30
		
		moon = {
			class = pc_barren
			size = 10
			entity = "barren_planet_01_destroyed_entity"
		}
	}
	
	change_orbit = 40
	
	planet = {
		count = 5
		class = pc_asteroid
		orbit_distance = 0
	}
	
	planet = {
		class = pc_gas_giant
		size = 30
		orbit_distance = 40
		
		flags = { mem_regressors_gas_central }
		
		init_effect = { prevent_anomaly = yes }
		
		moon = {
			class = pc_barren_cold
			size = 7
			orbit_distance = 10
			
			flags = { mem_regressors_gas_moon_one }
			
			init_effect = { prevent_anomaly = yes }
		}
		
		moon = {
			class = pc_toxic
			size = 6
			orbit_distance = 5
			
			flags = { mem_regressors_gas_moon_two }
			
			init_effect = { prevent_anomaly = yes }
		}
		
		moon = {
			class = pc_frozen
			size = 8
			orbit_distance = 10
			
			flags = { mem_regressors_gas_moon_three }
			
			init_effect = { prevent_anomaly = yes }
		}
		
		moon = {
			class = pc_barren
			entity = barren_planet_01_destroyed_entity
			size = 7
			orbit_distance = 5
			
			flags = { mem_regressors_gas_moon_four }
			
			init_effect = { prevent_anomaly = yes }
		}
	}
	
	planet = {
		class = pc_barren_cold
		size = 12
		orbit_distance = 60
		orbit_angle = 150
		
		moon = {
			class = pc_frozen
			size = 6
			orbit_distance = 5
		}
		
		init_effect = {
			save_event_target_as = megastructure_spawn
		}
	}
	
	planet = {
		class = pc_frozen
		size = 20
		orbit_distance = 60
	}
	
	init_effect = {
		spawn_megastructure = { 
			type = "spy_orb_ruined" 
			location = event_target:megastructure_spawn
		}
	}
}