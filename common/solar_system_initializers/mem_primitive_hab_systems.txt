mem_primitive_hab_system_01 = {
    class = sc_binary_1

    flags = { mem_primitive_hab_system primitive_system }

    usage = misc_system_init
    usage_odds = {
        base = 9000
        modifier = {
            factor = 0
            NOT = {
                host_has_dlc = "Utopia"
            }
        }
        modifier = {
            factor = 0
            has_star_flag = empire_cluster
        }
    }
    max_instances = 1

    change_orbit = 25

    planet = {
        class = star
        size = 25
        orbit_distance = 0
    }

    planet = {
        class = star
        size = 16
        orbit_distance = 0
        orbit_angle = 180
    }

    change_orbit = 35

    planet = {
        count = { min = 1 max = 2 }
        orbit_distance = 20
    }

    planet = {
        count = { min = 1 max = 3 }
        orbit_distance = { min = 25 max = 30 }

        moon = {
            count = { min = 0 max = 1 }
            orbit_distance = 10
        }
    }

    planet = {
        size = 25
        class = random_non_habitable

        flags = { mem_primitive_hab_host has_megastructure }

        init_effect = {
            prevent_anomaly = yes
            orbital_deposit_tile = { clear_deposits = yes }

            save_event_target_as = habitat_site
        }
    }

    planet = {
        count = { min = 1 max = 3 }
        orbit_distance = { min = 30 max = 40 }

        change_orbit = 5

        moon = {
            count = { min = 0 max = 2 }
            orbit_distance = 5
        }
    }

    init_effect = {
        spawn_planet = {
            class = pc_habitat
            location = event_target:habitat_site
            orbit_location = yes
            orbit_angle_offset = 45
            orbit_distance_offset = 9.899
            size = 12
            has_ring = no

            init_effect = {
                set_name = "Benda"
                set_planet_flag = mem_caretakers_habitat
                save_event_target_as = the_habitat
            }
        }
        event_target:the_habitat = {
            random_list = {
                1 = {
                    set_planet_entity = {
                        entity = "reptilian_01_orbital_habitat_entity"
                    }
                }
                1 = {
                    set_planet_entity = {
                        entity = "mammalian_01_orbital_habitat_entity"
                    }
                }
                1 = {
                    set_planet_entity = {
                        entity = "avian_01_orbital_habitat_entity"
                    }
                }
                1 = {
                    set_planet_entity = {
                        entity = "arthropoid_01_orbital_habitat_entity"
                    }
                }
                1 = {
                    set_planet_entity = {
                        entity = "molluscoid_01_orbital_habitat_entity"
                    }
                }
                1 = {
                    set_planet_entity = {
                        entity = "fungoid_01_orbital_habitat_entity"
                    }
                }
                1 = {
                    set_planet_entity = {
                        entity = "humanoid_01_orbital_habitat_entity"
                    }
                    modifier = {
                        factor = 0
                        NOT = { host_has_dlc = "Humanoids Species Pack" }
                    }
                }
                1 = {
                    set_planet_entity = {
                        entity = "plantoid_01_orbital_habitat_entity"
                    }
                    modifier = {
                        factor = 0
                        NOT = { host_has_dlc = "Plantoid" }
                    }
                }
            }
            while = {
                limit = {
                    any_tile = { has_blocker = yes }
                }
                random_tile = {
                    limit = { has_blocker = yes }
                    remove_blocker = yes
                }
            }
            set_planet_flag = megastructure
            set_planet_flag = habitat
            remove_orbital_deposit = yes

            create_species = {
                name = "Benda"
                plural = "Bendas"
                adjective = "Benda"

                class = AVI
                portrait = random
                homeworld = this

                traits = {
                    trait = trait_weak
                    trait = trait_slow_breeders
                    trait = trait_talented
                    trait = trait_intelligent
                    trait = trait_quick_leaders
                }
            }
            create_country = {
                type = primitive
                species = last_created_species
            }
        }
    }
}