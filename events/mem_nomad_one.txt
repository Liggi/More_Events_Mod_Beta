#Nomad One
#By ViolentBeetle

namespace = mem_nomad_one

@timer = 30
@timer_random = 30
#Gatekeeper plus taking a snapshot of player's species
event = {
    id = mem_nomad_one.1
    hide_window = yes
    is_triggered_only = yes

    limit = {
        any_country = {
            is_ai = no
            NOT = { has_ethic = ethic_gestalt_consciousness }
            NOT = { has_country_flag = human_2 }
        }
    }

    immediate = {
        random_list = {
            0 = {}
            30 = {
                random_country = {
                    limit = {
                        is_ai = no
                        NOT = { has_ethic = ethic_gestalt_consciousness }
                        NOT = { has_country_flag = human_2 }
                    }
                    create_country = {
                        name = "Nomad One"
                        type = faction
                        auto_delete = no
                        species = this
                        effect = {
                            set_country_flag = mem_nomad_one_faction
                        }
                    }
                    set_country_flag = mem_nomad_one_country
                    country_event = {  
                        id = mem_nomad_one.2
                        days = @timer
                        random = @timer_random
                    }
                }
            }
        }
        
    }
}

#Introduction
country_event = {
    id = mem_nomad_one.2
    title = mem_nomad_one.2.name
    desc = {
        text = mem_nomad_one.2.generic
        trigger = {
            NOR = {
                has_ethic = ethic_fanatic_xenophobe
                has_ethic = ethic_fanatic_xenophile
                has_ethic = ethic_fanatic_pacifist
                has_ethic = ethic_fanatic_militarist
                has_ethic = ethic_fanatic_spiritualist
                has_ethic = ethic_fanatic_materialist
                has_ethic = ethic_fanatic_egalitarian
                has_ethic = ethic_fanatic_authoritarian
            }
        }
    }
    desc = {
        text = mem_nomad_one.2.xenophobe
        trigger = {
            has_ethic = ethic_fanatic_xenophobe
        }
    }
    desc = {
        text = mem_nomad_one.2.xenophile
        trigger = {
            has_ethic = ethic_fanatic_xenophile
        }
    }
    desc = {
        text = mem_nomad_one.2.pacifist
        trigger = {
            has_ethic = ethic_fanatic_pacifist
        }
    }
    desc = {
        text = mem_nomad_one.2.militarist
        trigger = {
            has_ethic = ethic_fanatic_militarist
        }
    }
    desc = {
        text = mem_nomad_one.2.spiritualist
        trigger = {
            has_ethic = ethic_fanatic_spiritualist
        }
    }
    desc = {
        text = mem_nomad_one.2.materialist
        trigger = {
            has_ethic = ethic_fanatic_materialist
        }
    }
    desc = {
        text = mem_nomad_one.2.egalitarian
        trigger = {
            has_ethic = ethic_fanatic_egalitarian
        }
    }
    desc = {
        text = mem_nomad_one.2.authoritarian
        trigger = {
            has_ethic = ethic_fanatic_authoritarian
        }
    }
    desc = {
        text = mem_nomad_one.2.corporate
        exclusive_trigger = {
            has_valid_civic = civic_corporate_dominion
        }
    }
    desc = {
        text = mem_nomad_one.2.nuked
        exclusive_trigger = {
            has_valid_civic = civic_post_apocalyptic
        }
    }

    is_triggered_only = yes
    picture = GFX_evt_big_landing_ship

    trigger = {
        count_system = {
            count > 2
            limit = {
                distance = {
                    source = capital_scope
                    min_jumps = 2
                    max_jumps = 8
                }
                NOR = {
                    has_star_flag = hostile_system
                    exists = space_owner
                    any_planet = {
                        surveyed = {
                            who = ROOT
                            status = yes
                        }
                    }
                }
            }
        }
    }

    option = {
        name = mem_nomad_one.2.a

        random_system = {
            limit = {
                distance = {
                    source = capital_scope
                    min_jumps = 2
                    max_jumps = 8
                }
                NOR = {
                    has_star_flag = hostile_system
                    exists = space_owner
                    any_planet = {
                        surveyed = {
                            who = ROOT
                            status = yes
                        }
                    }
                }
            }
            save_event_target_as = first_system
            set_star_flag = mem_nomad_one_coordinates_1
        }
        random_system = {
            limit = {
                distance = {
                    source = capital_scope
                    min_jumps = 2
                    max_jumps = 8
                }
                NOR = {
                    is_same_value = event_target:first_system
                    has_star_flag = hostile_system
                    exists = space_owner
                    any_planet = {
                        surveyed = {
                            who = ROOT
                            status = yes
                        }
                    }
                }
            }
            save_event_target_as = second_system
            set_star_flag = mem_nomad_one_coordinates_2
        }
        random_system = {
            limit = {
                distance = {
                    source = capital_scope
                    min_jumps = 2
                    max_jumps = 8
                }
                NOR = {
                    is_same_value = event_target:first_system
                    is_same_value = event_target:second_system
                    has_star_flag = hostile_system
                    exists = space_owner
                    any_planet = {
                        surveyed = {
                            who = ROOT
                            status = yes
                        }
                    }
                }
            }
            save_event_target_as = third_system
            set_star_flag = mem_nomad_one_coordinates_3
        }
        begin_event_chain = {
            event_chain = "mem_nomad_one_chain"
            target = root
        }
        create_point_of_interest = {
            id = mem_nomad_one.poi.1
            name = mem_nomad_one_poi_1
            desc = mem_nomad_one_poi_1_desc
            category = mem_nomad_one_possible
            event_chain = "mem_nomad_one_chain"
            location = event_target:first_system
        }
        hidden_effect = {
            create_point_of_interest = {
                id = mem_nomad_one.poi.2
                category = mem_nomad_one_possible
                location = event_target:second_system
            }
            create_point_of_interest = {
                id = mem_nomad_one.poi.3
                category = mem_nomad_one_possible
                location = event_target:third
            }
        }
    }

    option = {
        name = NOTIME
    }
}